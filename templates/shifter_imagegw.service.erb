[Unit]
Description=Shifter Image Manager
After=network.service # munge.service # consider munge dependency **after** splitting the munge recipe from the slurm cookbook

[Service]
Type=simple
# User=shifter
# Group=shifter
PrivateTmp=true
PermissionsStartOnly=true
Environment=PYTHONPATH=<%= @shifter_udiroot_dir %>/lib/python2.7/site-packages/
ExecStartPre=/usr/bin/mkdir -p /var/log/shifter_imagegw
# ExecStartPre=/usr/bin/chown shifter:shifter /var/log/shifter_imagegw
ExecStart=/usr/bin/gunicorn \
-b 0.0.0.0:5000 --backlog 2048 \
--access-logfile=/var/log/shifter_imagegw/access.log \
--log-file=/var/log/shifter_imagegw/error.log \
shifter_imagegw.api:app
Restart=on-failure

#ExecStart=/usr/sbin/openvpn --daemon --suppress-timestamps --writepid /var/run/openvpn/%i.pid --cd /etc/openvpn/ --config %i.conf
#ExecReload=/sbin/killproc -p /var/run/openvpn/%i.pid -HUP /usr/sbin/openvpn

[Install]
WantedBy=multi-user.target